CREATE USER 'ENTIDAD'@'localhost' IDENTIFIED BY 'ENTIDAD';
GRANT ALL PRIVILEGES ON ENTIDAD TO 'ENTIDAD'@'localhost';
drop schema ENTIDAD3;
create schema ENTIDAD;
use ENTIDAD3;
CREATE TABLE TBL_CENTRO_EDUCATIVO (
  CENTRO_EDUCATIVO INT(11) NOT NULL AUTO_INCREMENT,
  CODIGO_DEPARTAMENTAL VARCHAR(25) NULL DEFAULT NULL,
  NOMBRE VARCHAR(75) NULL DEFAULT NULL,
  DIRECCION VARCHAR(100) NULL DEFAULT NULL,
  TELEFONO VARCHAR(15) NULL DEFAULT NULL,
  CORREO VARCHAR(50) NULL DEFAULT NULL,
  ADMINISTRADOR_ESCUELA VARCHAR(50) NULL DEFAULT NULL,
  CARGO VARCHAR(30) NULL DEFAULT NULL,
  PRIMARY KEY (CENTRO_EDUCATIVO))
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_ESTADO (
  ESTADO INT(11) NOT NULL AUTO_INCREMENT,
  DESCRIPCION VARCHAR(30) NULL DEFAULT NULL,
  OBSERVACION VARCHAR(250) NULL DEFAULT NULL,
  PRIMARY KEY (ESTADO))
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_ALUMNO (
  ALUMNO INT(11) NOT NULL AUTO_INCREMENT,
  ID_CENTRO_EDUCATIVO INT(11) NULL DEFAULT NULL,
  ID_ESTADO INT(11) NULL DEFAULT NULL,
  NOMBRE VARCHAR(75) NULL DEFAULT NULL,
  APELLIDO VARCHAR(75) NULL DEFAULT NULL,
  FECHA_NACIMIENTO DATE NULL DEFAULT NULL,
  NOMBRE_ENCARGADO VARCHAR(100) NULL DEFAULT NULL,
  TELEFONO_ENCARGADO VARCHAR(15) NULL DEFAULT NULL,
  PRIMARY KEY (ALUMNO),
  CONSTRAINT CENTRO_ALUMNO
    FOREIGN KEY (ID_CENTRO_EDUCATIVO)
    REFERENCES TBL_CENTRO_EDUCATIVO (CENTRO_EDUCATIVO) 
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT ESTADO_ALUMNO
    FOREIGN KEY (ID_ESTADO)
    REFERENCES TBL_ESTADO (ESTADO)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_NIVEL_EDUCATIVO (
  NIVEL_EDUCATIVO INT(11) NOT NULL AUTO_INCREMENT,
  NOMBRE VARCHAR(50) NULL DEFAULT NULL,
  DESCRIPCION VARCHAR(250) NULL DEFAULT NULL,
  PRIMARY KEY (NIVEL_EDUCATIVO))
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_GRADO_EDUCATIVO (
  GRADO_EDUCATIVO INT(11) NOT NULL AUTO_INCREMENT,
  NOMBRE VARCHAR(50) NULL DEFAULT NULL,
  DESCRIPCION VARCHAR(250) NULL DEFAULT NULL,
  ID_NIVEL_EDUCATIVO INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (GRADO_EDUCATIVO),
  CONSTRAINT NIVEL_GRADO
    FOREIGN KEY (ID_NIVEL_EDUCATIVO)
    REFERENCES TBL_NIVEL_EDUCATIVO (NIVEL_EDUCATIVO)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_SECCION (
  SECCION INT(11) NOT NULL AUTO_INCREMENT,
  LITERAL CHAR(2) NULL DEFAULT NULL,
  PRIMARY KEY (SECCION))
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_ALUMNO_ASIGNACION (
  ID_A_ASIGNACION INT(11) NOT NULL AUTO_INCREMENT,
  ID_ALUMNO INT(11) NULL DEFAULT NULL,
  ID_GRADO_EDUCATIVO INT(11) NULL DEFAULT NULL,
  ID_SECCION INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (ID_A_ASIGNACION),
  CONSTRAINT A_ALUMNO_ASIGNACION
    FOREIGN KEY (ID_ALUMNO)
    REFERENCES TBL_ALUMNO (ALUMNO)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT A_GRADO_ASIGNACION
    FOREIGN KEY (ID_GRADO_EDUCATIVO)
    REFERENCES TBL_GRADO_EDUCATIVO (GRADO_EDUCATIVO)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT A_SECCION_ASIGNACION
    FOREIGN KEY (ID_SECCION)
    REFERENCES TBL_SECCION (SECCION)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_MATERIA (
  MATERIA INT(11) NOT NULL AUTO_INCREMENT,
  NOMBRE VARCHAR(30) NULL DEFAULT NULL,
  PRIMARY KEY (MATERIA))
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_TAREA_TIPO (
  TAREA_TIPO INT(11) NOT NULL AUTO_INCREMENT,
  DESCRIPCION VARCHAR(30) NULL DEFAULT NULL,
  OBSERVACION VARCHAR(250) NULL DEFAULT NULL,
  PRIMARY KEY (TAREA_TIPO))
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_UNIDAD (
  UNIDAD INT(11) NOT NULL AUTO_INCREMENT,
  NOMBRE VARCHAR(30) NULL DEFAULT NULL,
  PRIMARY KEY (UNIDAD))
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_TAREA (
  TAREA INT(11) NOT NULL AUTO_INCREMENT,
  ID_GRADO_EDUCATIVO INT(11) NULL DEFAULT NULL,
  ID_SECCION INT(11) NULL DEFAULT NULL,
  ID_MATERIA INT(11) NULL DEFAULT NULL,
  OBSERVACION VARCHAR(100) NULL DEFAULT NULL,
  ID_TIPO_TAREA INT(11) NULL DEFAULT NULL,
  ID_UNIDAD INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (TAREA),
  CONSTRAINT GRADO_TAREA
    FOREIGN KEY (ID_GRADO_EDUCATIVO)
    REFERENCES TBL_GRADO_EDUCATIVO (GRADO_EDUCATIVO)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT MATERIA_TAREA
    FOREIGN KEY (ID_MATERIA)
    REFERENCES TBL_MATERIA (MATERIA)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT SECCION_TAREA
    FOREIGN KEY (ID_SECCION)
    REFERENCES TBL_SECCION (SECCION)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT TIPO_TAREA
    FOREIGN KEY (ID_TIPO_TAREA)
    REFERENCES TBL_TAREA_TIPO (TAREA_TIPO)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT UNIDAD_TAREA
    FOREIGN KEY (ID_UNIDAD)
    REFERENCES TBL_UNIDAD (UNIDAD)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_YYYY (
  YYYY INT NOT NULL,
  ANUAL INT NOT NULL,
  SLECCION INT NOT NULL,
  PRIMARY KEY (YYYY))
ENGINE = INNODB;

CREATE TABLE TBL_NOTA (
  NOTA INT(11) NOT NULL AUTO_INCREMENT,
  ID_TAREA INT(11) NULL DEFAULT NULL,
  ID_ALUMNO INT(11) NULL DEFAULT NULL,
  OBSERVACION VARCHAR(100) NULL DEFAULT NULL,
  ID_YYYY INT NOT NULL,
  PRIMARY KEY (NOTA),
  CONSTRAINT TAREA_ALUMNO
    FOREIGN KEY (ID_ALUMNO)
    REFERENCES TBL_ALUMNO (ALUMNO)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT TAREA_NOTA
    FOREIGN KEY (ID_TAREA)
    REFERENCES TBL_TAREA (TAREA)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT FK_TBL_NOTA_YYYY1
    FOREIGN KEY (ID_YYYY)
    REFERENCES TBL_YYYY (YYYY)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_PROFESOR (
  PROFESOR INT(11) NOT NULL AUTO_INCREMENT,
  ID_ESTADO INT(11) NULL DEFAULT NULL,
  NOMBRE VARCHAR(75) NULL DEFAULT NULL,
  APELLIDO VARCHAR(75) NULL DEFAULT NULL,
  FECHA_NACIMIENTO DATE NULL DEFAULT NULL,
  DOC_IDENTIFICACION VARCHAR(20) NULL DEFAULT NULL,
  TELEFONO VARCHAR(15) NULL DEFAULT NULL,
  CORREO VARCHAR(50) NULL DEFAULT NULL,
  AREA_DOCENSIA VARCHAR(40) NULL DEFAULT NULL,
  PRIMARY KEY (PROFESOR),
  CONSTRAINT ESTADO_PROFESOR
    FOREIGN KEY (ID_ESTADO)
    REFERENCES TBL_ESTADO (ESTADO)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;

CREATE TABLE TBL_PROFESOR_ASIGNACION (
  ID_P_ASIGNACION INT(11) NOT NULL AUTO_INCREMENT,
  ID_PROFESOR INT(11) NULL DEFAULT NULL,
  ID_GRADO_EDUCATIVO INT(11) NULL DEFAULT NULL,
  ID_SECCION INT(11) NULL DEFAULT NULL,
  ID_MATERIA INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (ID_P_ASIGNACION),
  CONSTRAINT P_GRADO_ASIGNACION
    FOREIGN KEY (ID_GRADO_EDUCATIVO)
    REFERENCES TBL_GRADO_EDUCATIVO (GRADO_EDUCATIVO)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT P_MATERIA
    FOREIGN KEY (ID_MATERIA)
    REFERENCES TBL_MATERIA (MATERIA)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT P_PROFESOR
    FOREIGN KEY (ID_PROFESOR)
    REFERENCES TBL_PROFESOR (PROFESOR)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT P_SECCION_ASIGNACION
    FOREIGN KEY (ID_SECCION)
    REFERENCES TBL_SECCION (SECCION)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = INNODB
DEFAULT CHARACTER SET = LATIN1;